{

{\tikzset{node/.style={
    prefix after command= {\pgfextra{\tikzset{every
    label/.style={font=\footnotesize}}}}
    }
}
\begin{figure}
\centering
\begin{tikzpicture}
\tikzmath{
\x0=0;
\y0=0;
\yalabel=1.5;
\yblabel=2.5;
\yclabel=4.0;
\ydlabel=5.0;
\yelabel=6.5;
\yflabel=7.5;
\yglabel=9.0;
\mepsx0=-0.2;
\yhlabel=1.5;
\xalabel=9;
\xblabel=3;
\xclabel=6;
\yilabel=0.75;
\mepsy0=-0.2;
\epsxclabel=6.2;
\epsyhlabel=1.7;
\yajlabel=1.5;
\yaalabel=2.5;
\yablabel=1.5;
\yaclabel=2.5;
\yadlabel=4.0;
\xdlabel=9;
\xelabel=3;
\xflabel=6;
\yaelabel=3.25;
\mepsyaalabel=2.3;
\epsxflabel=6.2;
\epsyadlabel=4.2;
\yaflabel=1.5;
\yaglabel=2.5;
\yahlabel=4.0;
\yailabel=5.0;
\ybjlabel=1.5;
\ybalabel=2.5;
\ybblabel=4.0;
\ybclabel=5.0;
\ybdlabel=6.5;
\xglabel=9;
\xhlabel=3;
\xilabel=6;
\ybelabel=5.75;
\mepsyailabel=4.8;
\epsxilabel=6.2;
\epsybdlabel=6.7;
\xajlabel=9.4;
\xaalabel=9.4;
\xablabel=11.4;
\ybflabel=1.5;
\ybglabel=2.5;
\ybhlabel=4.0;
\ybilabel=5.0;
\ycjlabel=6.5;
\ycalabel=8.5;
\ycblabel=1.5;
\ycclabel=2.5;
\ycdlabel=4.0;
\ycelabel=5.0;
\ycflabel=6.5;
\xaclabel=9.6;
\ycglabel=7.166666666666667;
\xadlabel=9.8;
\ychlabel=7.833333333333333;
\xaelabel=10.0;
\ycilabel=8.166666666666666;
\xaflabel=10.200000000000001;
\xaglabel=10.8;
\mepsxajlabel=9.200000000000001;
\epsxablabel=11.6;
\epsycalabel=8.7;
\ydjlabel=1.5;
\ydalabel=2.5;
\ydblabel=1.5;
\ydclabel=2.5;
\yddlabel=4.0;
\ydelabel=5.0;
\ydflabel=1.5;
\ydglabel=7.833333333333334;
\ydhlabel=7.333333333333334;
\ydilabel=7.5;
\yejlabel=7.666666666666667;
\xahlabel=10.4;
\xailabel=10.6;
\xbjlabel=10.799999999999999;
\yealabel=7.499999999999999;
\yeblabel=8.166666666666666;
\yeclabel=7.666666666666666;
\yedlabel=7.833333333333332;
\yeelabel=7.999999999999999;
\xbalabel=11.0;
\xbblabel=11.2;
\xbclabel=11.399999999999999;
\xbdlabel=9.4;
\xbelabel=11.4;
\xbflabel=12.4;
\xbglabel=9.4;
\xbhlabel=11.4;
\xbilabel=12.4;
\xcjlabel=14.4;
\yeflabel=1.5;
\yeglabel=2.5;
\yehlabel=4.0;
\yeilabel=5.0;
\yfjlabel=6.5;
\yfalabel=8.5;
\yfblabel=1.5;
\yfclabel=2.5;
\yfdlabel=4.0;
\yfelabel=5.0;
\yfflabel=6.5;
\xcalabel=12.6;
\yfglabel=7.166666666666667;
\xcblabel=12.8;
\yfhlabel=7.833333333333333;
\xcclabel=13.0;
\yfilabel=8.166666666666666;
\xcdlabel=13.200000000000001;
\xcelabel=13.8;
\mepsxbflabel=12.200000000000001;
\epsxcjlabel=14.6;
\epsyfalabel=8.7;
\ygjlabel=1.5;
\ygalabel=2.5;
\ygblabel=4.0;
\ygclabel=5.0;
\ygdlabel=6.5;
\ygelabel=1.5;
\ygflabel=2.5;
\ygglabel=7.833333333333334;
\yghlabel=7.333333333333334;
\ygilabel=7.5;
\yhjlabel=7.666666666666667;
\xcflabel=13.4;
\xcglabel=13.6;
\xchlabel=13.799999999999999;
\yhalabel=7.499999999999999;
\yhblabel=8.166666666666666;
\yhclabel=7.666666666666666;
\yhdlabel=7.833333333333332;
\yhelabel=7.999999999999999;
\xcilabel=14.0;
\xdjlabel=14.2;
\xdalabel=14.399999999999999;
}

\filldraw [fill=cyan!30, draw=black] (\mepsxajlabel,\mepsy0) rectangle (\epsxablabel, \epsycalabel);
\draw (\xaclabel,\ydalabel) -- (\xaclabel,\ycglabel);
\draw (\xaclabel,\ycglabel) -- (\xaflabel,\ycglabel);
\draw (\xadlabel,\ydelabel) -- (\xadlabel,\ychlabel);
\draw (\xadlabel,\ychlabel) -- (\xaflabel,\ychlabel);
\draw (\xaelabel,\ydflabel) -- (\xaelabel,\ycilabel);
\draw (\xaelabel,\ycilabel) -- (\xaglabel,\ycilabel);
\node[above right] at (\mepsxajlabel,\epsycalabel) {CLAUSE-gadget$_1$};
\draw (\xaflabel,\ycglabel) -- (\xaflabel,\ydglabel);
\draw (\xaflabel,\ydhlabel) -- (\xailabel,\ydhlabel);
\draw (\xaflabel,\yejlabel) -- (\xailabel,\yejlabel);
\draw (\xahlabel,\ydhlabel) -- (\xahlabel,\yejlabel);
\draw (\xailabel,\ydhlabel) -- (\xailabel,\yejlabel);
\draw (\xailabel,\ydilabel) -- (\xbjlabel,\ydilabel);
\draw (\xaglabel,\yealabel) -- (\xaglabel,\yeblabel);
\draw (\xaglabel,\yeclabel) -- (\xbblabel,\yeclabel);
\draw (\xaglabel,\yeelabel) -- (\xbblabel,\yeelabel);
\draw (\xbalabel,\yeclabel) -- (\xbalabel,\yeelabel);
\draw (\xbblabel,\yeclabel) -- (\xbblabel,\yeelabel);
\draw (\xbblabel,\yedlabel) -- (\xbclabel,\yedlabel);

\filldraw [fill=cyan!30, draw=black] (\mepsxbflabel,\mepsy0) rectangle (\epsxcjlabel, \epsyfalabel);
\draw (\xcalabel,\ygdlabel) -- (\xcalabel,\yfglabel);
\draw (\xcalabel,\yfglabel) -- (\xcdlabel,\yfglabel);
\draw (\xcblabel,\y0) -- (\xcblabel,\yfhlabel);
\draw (\xcblabel,\yfhlabel) -- (\xcdlabel,\yfhlabel);
\draw (\xcclabel,\ygflabel) -- (\xcclabel,\yfilabel);
\draw (\xcclabel,\yfilabel) -- (\xcelabel,\yfilabel);
\node[above right] at (\mepsxbflabel,\epsyfalabel) {CLAUSE-gadget$_2$};
\draw (\xcdlabel,\yfglabel) -- (\xcdlabel,\ygglabel);
\draw (\xcdlabel,\yghlabel) -- (\xcglabel,\yghlabel);
\draw (\xcdlabel,\yhjlabel) -- (\xcglabel,\yhjlabel);
\draw (\xcflabel,\yghlabel) -- (\xcflabel,\yhjlabel);
\draw (\xcglabel,\yghlabel) -- (\xcglabel,\yhjlabel);
\draw (\xcglabel,\ygilabel) -- (\xchlabel,\ygilabel);
\draw (\xcelabel,\yhalabel) -- (\xcelabel,\yhblabel);
\draw (\xcelabel,\yhclabel) -- (\xdjlabel,\yhclabel);
\draw (\xcelabel,\yhelabel) -- (\xdjlabel,\yhelabel);
\draw (\xcilabel,\yhclabel) -- (\xcilabel,\yhelabel);
\draw (\xdjlabel,\yhclabel) -- (\xdjlabel,\yhelabel);
\draw (\xdjlabel,\yhdlabel) -- (\xdalabel,\yhdlabel);
\draw (\xclabel,\y0) -- (\xalabel,\y0) node[pos=0.5, above] {$x_1 = \true$};
\draw (\xclabel,\yhlabel) -- (\xalabel,\yhlabel) node[pos=0.5, above] {$x_1 = \false$};
\draw (\xalabel,\y0) -- (15,\y0);
\draw (\xalabel,\yhlabel) -- (15,\yhlabel);
\filldraw [fill=lime!30, draw=black] (\mepsx0,\mepsy0) rectangle (\epsxclabel, \epsyhlabel);
\draw (\x0,\y0) -- (\xalabel,\y0);
\draw (\x0,\y0) -- (\x0,\yilabel);
\draw (\xblabel,\y0) -- (\xblabel,\yhlabel);
\draw (\xblabel,\yhlabel) -- (\xalabel,\yhlabel);
\draw (\x0,\yilabel) -- (\xblabel,\yilabel);
\node[above right] at (\mepsx0,\epsyhlabel) {VARIABLE-gadget$_1$};
\draw (\xflabel,\yaalabel) -- (\xdlabel,\yaalabel) node[pos=0.5, above] {$x_2 = \true$};
\draw (\xflabel,\yadlabel) -- (\xdlabel,\yadlabel) node[pos=0.5, above] {$x_2 = \false$};
\draw (\xdlabel,\yaalabel) -- (15,\yaalabel);
\draw (\xdlabel,\yadlabel) -- (15,\yadlabel);
\filldraw [fill=lime!30, draw=black] (\mepsx0,\mepsyaalabel) rectangle (\epsxflabel, \epsyadlabel);
\draw (\x0,\yaalabel) -- (\xdlabel,\yaalabel);
\draw (\x0,\yaalabel) -- (\x0,\yaelabel);
\draw (\xelabel,\yaalabel) -- (\xelabel,\yadlabel);
\draw (\xelabel,\yadlabel) -- (\xdlabel,\yadlabel);
\draw (\x0,\yaelabel) -- (\xelabel,\yaelabel);
\node[above right] at (\mepsx0,\epsyadlabel) {VARIABLE-gadget$_2$};
\draw (\xilabel,\yailabel) -- (\xglabel,\yailabel) node[pos=0.5, above] {$x_3 = \true$};
\draw (\xilabel,\ybdlabel) -- (\xglabel,\ybdlabel) node[pos=0.5, above] {$x_3 = \false$};
\draw (\xglabel,\yailabel) -- (15,\yailabel);
\draw (\xglabel,\ybdlabel) -- (15,\ybdlabel);
\filldraw [fill=lime!30, draw=black] (\mepsx0,\mepsyailabel) rectangle (\epsxilabel, \epsybdlabel);
\draw (\x0,\yailabel) -- (\xglabel,\yailabel);
\draw (\x0,\yailabel) -- (\x0,\ybelabel);
\draw (\xhlabel,\yailabel) -- (\xhlabel,\ybdlabel);
\draw (\xhlabel,\ybdlabel) -- (\xglabel,\ybdlabel);
\draw (\x0,\ybelabel) -- (\xhlabel,\ybelabel);
\node[above right] at (\mepsx0,\epsybdlabel) {VARIABLE-gadget$_3$};

	\draw[dashed] (0, -0.4) -- (0, \yglabel) node[above] {$-3L$};
	\draw[dashed] (3, -0.4) -- (3, \yglabel) node[above] {$-2L$};
	\draw[dashed] (6, -0.4) -- (6, \yglabel) node[above] {$-L$};
	\draw[dashed] (9, -0.4) -- (9, \yglabel) node[above] {0};

\end{tikzpicture}
\caption{\textbf{Scheme of the whole construction.}}
General layout of VARIABLE-gadgets and CLAUSE-gadgets and how they
interact with each other. In \textcolor{lime}{green} and \textcolor{cyan}{blue}
we depict bounding boxes given by Claims \ref{claim:variable_small_bounding_rectangle}
and \ref{claim:clause_bounding_rectangle}, respectively.
\label{fig:segment_apx_whole}
\end{figure}

