{
\begin{figure}
\centering
\begin{tikzpicture}
\tikzmath{
\x0=0;
\y0=0;
\mepsx0=-0.2;
\yalabel=1.5;
\xalabel=15;
\xblabel=3.75;
\xclabel=7.5;
\yblabel=0.75;
\mepsy0=-0.2;
\epsxclabel=7.7;
\epsyalabel=1.7;
\yclabel=1.5;
\ydlabel=2.5;
\yelabel=1.5;
\yflabel=2.5;
\yglabel=4.0;
\xdlabel=15;
\xelabel=3.75;
\xflabel=7.5;
\yhlabel=3.25;
\mepsydlabel=2.3;
\epsxflabel=7.7;
\epsyglabel=4.2;
\yilabel=1.5;
\yajlabel=2.5;
\yaalabel=4.0;
\yablabel=5.0;
\yaclabel=1.5;
\yadlabel=2.5;
\yaelabel=4.0;
\yaflabel=5.0;
\yaglabel=6.5;
\xglabel=15;
\xhlabel=3.75;
\xilabel=7.5;
\yahlabel=5.75;
\mepsyablabel=4.8;
\epsxilabel=7.7;
\epsyaglabel=6.7;
\xajlabel=11.25;
\xaalabel=11.25;
\xablabel=13.25;
\yailabel=1.5;
\ybjlabel=2.5;
\ybalabel=4.0;
\ybblabel=5.0;
\ybclabel=6.5;
\ybdlabel=8.5;
\ybelabel=1.5;
\ybflabel=2.5;
\ybglabel=4.0;
\ybhlabel=5.0;
\ybilabel=6.5;
\xaclabel=11.45;
\ycjlabel=7.166666666666667;
\xadlabel=11.65;
\ycalabel=7.833333333333333;
\xaelabel=11.85;
\ycblabel=8.166666666666666;
\xaflabel=12.05;
\xaglabel=12.65;
\mepsxajlabel=11.05;
\epsxablabel=13.45;
\epsybdlabel=8.7;
\ycclabel=1.5;
\ycdlabel=2.5;
\ycelabel=1.5;
\ycflabel=2.5;
\ycglabel=4.0;
\ychlabel=5.0;
\ycilabel=1.5;
\ydjlabel=7.833333333333334;
\ydalabel=7.333333333333334;
\ydblabel=7.5;
\ydclabel=7.666666666666667;
\xahlabel=12.25;
\xailabel=12.45;
\xbjlabel=12.649999999999999;
\yddlabel=7.499999999999999;
\ydelabel=8.166666666666666;
\ydflabel=7.666666666666666;
\ydglabel=7.833333333333332;
\ydhlabel=7.999999999999999;
\xbalabel=12.85;
\xbblabel=13.049999999999999;
\xbclabel=13.249999999999998;
\xbdlabel=11.25;
\xbelabel=13.25;
\xbflabel=14.25;
\xbglabel=11.25;
\xbhlabel=13.25;
\xbilabel=14.25;
\xcjlabel=16.25;
\ydilabel=1.5;
\yejlabel=2.5;
\yealabel=4.0;
\yeblabel=5.0;
\yeclabel=6.5;
\yedlabel=8.5;
\yeelabel=1.5;
\yeflabel=2.5;
\yeglabel=4.0;
\yehlabel=5.0;
\yeilabel=6.5;
\xcalabel=14.45;
\yfjlabel=7.166666666666667;
\xcblabel=14.65;
\yfalabel=7.833333333333333;
\xcclabel=14.85;
\yfblabel=8.166666666666666;
\xcdlabel=15.05;
\xcelabel=15.65;
\mepsxbflabel=14.05;
\epsxcjlabel=16.45;
\epsyedlabel=8.7;
\yfclabel=1.5;
\yfdlabel=2.5;
\yfelabel=4.0;
\yfflabel=5.0;
\yfglabel=6.5;
\yfhlabel=1.5;
\yfilabel=2.5;
\ygjlabel=7.833333333333334;
\ygalabel=7.333333333333334;
\ygblabel=7.5;
\ygclabel=7.666666666666667;
\xcflabel=15.25;
\xcglabel=15.45;
\xchlabel=15.649999999999999;
\ygdlabel=7.499999999999999;
\ygelabel=8.166666666666666;
\ygflabel=7.666666666666666;
\ygglabel=7.833333333333332;
\yghlabel=7.999999999999999;
\xcilabel=15.85;
\xdjlabel=16.05;
\xdalabel=16.25;
}

\filldraw [fill=cyan!30, draw=black] (\mepsxajlabel,\mepsy0) rectangle (\epsxablabel, \epsybdlabel);
\draw (\xaclabel,\ycdlabel) -- (\xaclabel,\ycjlabel);
\draw (\xaclabel,\ycjlabel) -- (\xaflabel,\ycjlabel);
\draw (\xadlabel,\ychlabel) -- (\xadlabel,\ycalabel);
\draw (\xadlabel,\ycalabel) -- (\xaflabel,\ycalabel);
\draw (\xaelabel,\ycilabel) -- (\xaelabel,\ycblabel);
\draw (\xaelabel,\ycblabel) -- (\xaglabel,\ycblabel);
\node[above right] at (\mepsxajlabel,\epsybdlabel) {CLAUSE-gadget$_1$};
\draw (\xaflabel,\ycjlabel) -- (\xaflabel,\ydjlabel);
\draw (\xaflabel,\ydalabel) -- (\xailabel,\ydalabel);
\draw (\xaflabel,\ydclabel) -- (\xailabel,\ydclabel);
\draw (\xahlabel,\ydalabel) -- (\xahlabel,\ydclabel);
\draw (\xailabel,\ydalabel) -- (\xailabel,\ydclabel);
\draw (\xailabel,\ydblabel) -- (\xbjlabel,\ydblabel);
\draw (\xaglabel,\yddlabel) -- (\xaglabel,\ydelabel);
\draw (\xaglabel,\ydflabel) -- (\xbblabel,\ydflabel);
\draw (\xaglabel,\ydhlabel) -- (\xbblabel,\ydhlabel);
\draw (\xbalabel,\ydflabel) -- (\xbalabel,\ydhlabel);
\draw (\xbblabel,\ydflabel) -- (\xbblabel,\ydhlabel);
\draw (\xbblabel,\ydglabel) -- (\xbclabel,\ydglabel);

\filldraw [fill=cyan!30, draw=black] (\mepsxbflabel,\mepsy0) rectangle (\epsxcjlabel, \epsyedlabel);
\draw (\xcalabel,\yfglabel) -- (\xcalabel,\yfjlabel);
\draw (\xcalabel,\yfjlabel) -- (\xcdlabel,\yfjlabel);
\draw (\xcblabel,\y0) -- (\xcblabel,\yfalabel);
\draw (\xcblabel,\yfalabel) -- (\xcdlabel,\yfalabel);
\draw (\xcclabel,\yfilabel) -- (\xcclabel,\yfblabel);
\draw (\xcclabel,\yfblabel) -- (\xcelabel,\yfblabel);
\node[above right] at (\mepsxbflabel,\epsyedlabel) {CLAUSE-gadget$_2$};
\draw (\xcdlabel,\yfjlabel) -- (\xcdlabel,\ygjlabel);
\draw (\xcdlabel,\ygalabel) -- (\xcglabel,\ygalabel);
\draw (\xcdlabel,\ygclabel) -- (\xcglabel,\ygclabel);
\draw (\xcflabel,\ygalabel) -- (\xcflabel,\ygclabel);
\draw (\xcglabel,\ygalabel) -- (\xcglabel,\ygclabel);
\draw (\xcglabel,\ygblabel) -- (\xchlabel,\ygblabel);
\draw (\xcelabel,\ygdlabel) -- (\xcelabel,\ygelabel);
\draw (\xcelabel,\ygflabel) -- (\xdjlabel,\ygflabel);
\draw (\xcelabel,\yghlabel) -- (\xdjlabel,\yghlabel);
\draw (\xcilabel,\ygflabel) -- (\xcilabel,\yghlabel);
\draw (\xdjlabel,\ygflabel) -- (\xdjlabel,\yghlabel);
\draw (\xdjlabel,\ygglabel) -- (\xdalabel,\ygglabel);
\draw (\xclabel,\y0) -- (\xalabel,\y0) node[pos=0.2, above] {$x_1 = \true$};
\draw (\xclabel,\yalabel) -- (\xalabel,\yalabel) node[pos=0.2, above] {$x_1 = \false$};
\filldraw [fill=lime!30, draw=black] (\mepsx0,\mepsy0) rectangle (\epsxclabel, \epsyalabel);
\draw (\x0,\y0) -- (\xalabel,\y0);
\draw (\x0,\y0) -- (\x0,\yblabel);
\draw (\xblabel,\y0) -- (\xblabel,\yalabel);
\draw (\xblabel,\yalabel) -- (\xalabel,\yalabel);
\draw (\x0,\yblabel) -- (\xblabel,\yblabel);
\node[above right] at (\mepsx0,\epsyalabel) {VARIABLE-gadget$_1$};
\draw (\xflabel,\ydlabel) -- (\xdlabel,\ydlabel) node[pos=0.2, above] {$x_2 = \true$};
\draw (\xflabel,\yglabel) -- (\xdlabel,\yglabel) node[pos=0.2, above] {$x_2 = \false$};
\filldraw [fill=lime!30, draw=black] (\mepsx0,\mepsydlabel) rectangle (\epsxflabel, \epsyglabel);
\draw (\x0,\ydlabel) -- (\xdlabel,\ydlabel);
\draw (\x0,\ydlabel) -- (\x0,\yhlabel);
\draw (\xelabel,\ydlabel) -- (\xelabel,\yglabel);
\draw (\xelabel,\yglabel) -- (\xdlabel,\yglabel);
\draw (\x0,\yhlabel) -- (\xelabel,\yhlabel);
\node[above right] at (\mepsx0,\epsyglabel) {VARIABLE-gadget$_2$};
\draw (\xilabel,\yablabel) -- (\xglabel,\yablabel) node[pos=0.2, above] {$x_3 = \true$};
\draw (\xilabel,\yaglabel) -- (\xglabel,\yaglabel) node[pos=0.2, above] {$x_3 = \false$};
\filldraw [fill=lime!30, draw=black] (\mepsx0,\mepsyablabel) rectangle (\epsxilabel, \epsyaglabel);
\draw (\x0,\yablabel) -- (\xglabel,\yablabel);
\draw (\x0,\yablabel) -- (\x0,\yahlabel);
\draw (\xhlabel,\yablabel) -- (\xhlabel,\yaglabel);
\draw (\xhlabel,\yaglabel) -- (\xglabel,\yaglabel);
\draw (\x0,\yahlabel) -- (\xhlabel,\yahlabel);
\node[above right] at (\mepsx0,\epsyaglabel) {VARIABLE-gadget$_3$};
\end{tikzpicture}
\caption{\textbf{Scheme of the whole construction.}}
General layout of VARIABLE-gadgets and CLAUSE-gadgets and how they
interact with each other.
\label{fig:segment_apx_whole}
\end{figure}

